<div class="container">
  <div *ngIf="isLoggedIn; else loggedOut">


    <div id="page-banner-area" class="page-banner">
      <div class="page-banner-title">
        <div class="text-center">
          <h2>Escritorio</h2>
          <a href="#"><i class="lni-home"></i> Inicio</a>
          <span class="crumbs-spacer"><i class="lni-chevron-right"></i></span>
          <span class="current">Escritorio</span>
        </div>
      </div>
    </div>


    <section class="user-page section-padding">
      <div class="container">
        <div class="row">
          <div class="col-lg-4 col-md-5 col-xs-12">
            <div class="user-profile-box">

              <div class="header clearfix">
                <h2>{{ currentUser.firstName}}</h2>
                <h4>Tipo de usuario:

                  <span>
                  <span *ngFor="let role of currentUser.roles">
                    <div [ngSwitch]="role">
                      <div *ngSwitchCase="'ROLE_ADMIN'">
                        ADMINISTRADOR
                      </div>
                      <div *ngSwitchCase="'ROLE_USERPRIME'">
                        PREMIUM
                      </div>
                      <div *ngSwitchDefault>
                        GRATIS
                      </div>
                      </div>
                    </span>
                </span>
                </h4>
                <img src="assets/img/agente1.jpg" alt="avatar" class="img-fluid profile-img">
              </div>

              <div class="detail clearfix">
                <ul>
                  <li>
                    <a class="active" routerLink="/escritorio">
                      <i class="lni-files"></i> Escritorio
                    </a>
                  </li>
                  <li>
                    <a routerLink="/profile">
                      <i class="lni-user"></i>Perfil
                    </a>
                  </li>
                  <li>
                    <a href="my-properties.html">
                      <i class="lni-home"></i>Mis propiedades
                    </a>
                  </li>
                  <li>
                    <a href="publicar-inmueble.html">
                      <i class="lni-plus"></i>Publicar nueva Propiedad
                    </a>
                  </li>
                  <li>
                    <a routerLink="/home">
                      <i class="lni-logout"></i>Cerrar sesión
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-8 col-md-7 col-xs-12">

            <div class="dashborad-box" id="main-container">
              <h4 class="title">Gestor de Publicaciones </h4>
              <div class="section-body listing-table">
                <div class="table-responsive">
                  <table  class="table table-striped">
                    <thead>
                    <tr>
                      <th>Título</th>
                      <th>Precio</th>
                      <th>Area</th>
                      <th>Editar</th>
                      <th>Eliminar</th>
                    </tr>
                    </thead>
                    <tbody *ngFor="let room of rooms">
                      <tr *ngIf="room?.ownerUser.id == currentUser.id">
                        <td>{{room?.title}}</td>
                        <td>{{room?.price | currency:"":"symbol"}}</td>
                        <td class="rating"><span>{{room?.area}} mts</span></td>
                        <td (click)="onOpenModal(room, 'edit')"class="edit"><a href="#"><span class="lni-pencil"></span></a></td>
                        <td (click)="onOpenModal(room, 'delete')"class="delete"><a href="#"><span class="lni lni-close"></span></a></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>



            <div class="dashborad-box">
              <h3 class="heading">Información Personal</h3>
              <div class="section-inforamation">
                <form>
                  <div class="row">
                    <div class="col-sm-12 col-12">
                      <div class="form-group">
                        <label>Nombre y apellido</label>
                        <input type="text" class="form-control" value="{{ currentUser.firstName}}" placeholder="Enter your First name">
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label>Email</label>
                        <input type="text" class="form-control" value="{{ currentUser.email }}" placeholder="Ex: example@domain.com">
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label>Phone Number</label>
                        <input type="text" class="form-control" placeholder="Ex: +1-0000-0000-00">
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <div class="form-group">
                        <label>Dirección</label>
                        <textarea name="address" class="form-control" value="{{ currentUser.address }}"placeholder="Escribe una dirección"></textarea>
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <div class="form-group">
                        <label>Acerca de ti</label>
                        <textarea name="address" class="form-control" placeholder="Write about userself"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="password-section">
                    <h6>Update Password</h6>
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Nueva contraseña</label>
                          <input type="password" class="form-control" placeholder="Nueva Contraseña">
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Repetir Contraseña</label>
                          <input type="password" class="form-control" placeholder="Repita la contraseña">
                        </div>
                      </div>
                    </div>
                  </div>
                  <button class="btn btn-common">Enviar</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- edit room Modal -->
    <div class="modal fade" id="updateRoomModal" tabindex="-1" role="dialog" aria-labelledby="roomEditModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="updateEmployeeModalLabel">Editar Habitación " {{editRoom?.title}} "</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form #editForm="ngForm">
              <div class="form-group">
                <label for="title">Nombre</label>
                <input type="text" ngModel="{{editRoom?.title}}" name="title" class="form-control" id="title" placeholder="Título" required>
              </div>
              <input type="hidden" ngModel="{{editRoom?.id}}" name="id" class="form-control" id="id" placeholder="Nombre">


              <div class="form-group">
                <label for="tipo">Tipo</label>
                <input type="text" ngModel="{{editRoom?.tipo}}" name="tipo" class="form-control" id="tipo" placeholder="Arriendo o Venta" required>
              </div>
              <div class="form-group">
                <label for="superficie">Superficie</label>
                <input type="text" ngModel="{{editRoom?.superficie}}" name="superficie" class="form-control" id="superficie" placeholder="Superficie" required>
              </div>
              <div class="form-group">
                <label for="area">Area</label>
                <input type="text" ngModel="{{editRoom?.area}}" name="area" class="form-control" id="area" placeholder="area" required>
              </div>
              <div class="form-group">
                <label for="price">Precio</label>
                <input type="text" ngModel="{{editRoom?.price}}" name="price" class="form-control" id="price" placeholder="price" required>
              </div>
              <div class="form-group">
                <label for="image">URL Imagen</label>
                <input type="text" ngModel="{{editRoom?.image}}" name="image" class="form-control" id="image" placeholder="image" required>
              </div>
              <div class="form-group">
                <label for="desctription">Descripción</label>
                <input type="text" ngModel="{{editRoom?.desctription}}" name="desctription" class="form-control" id="desctription" placeholder="Descripción" required>
              </div>
              <div class="modal-footer">
                <button type="button" id="" data-dismiss="modal" class="btn btn-secondary">Cerrar</button>
                <button (click)="onUpdateRoom(editForm.value)" data-dismiss="modal" class="btn btn-primary" >Guardar cambios</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>


    <!-- delete room Modal -->
    <div class="modal fade" id="deleteRoomModal" tabindex="-1" aria-labelledby="deleteRoomModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModelLabel">Eliminar una Habitación</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>¿ Estas seguro de querer borrar " {{deleteRoom?.title}} "?</p>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
              <button (click)="onDeleteRoom(deleteRoom?.id!)" class="btn btn-danger" data-dismiss="modal">Yes</button>
            </div>
          </div>
        </div>
      </div>
    </div>





    <a href="#" class="back-to-top">
      <i class="lni-chevron-up"></i>
    </a>
  </div>
  <ng-template #loggedOut>
    <div class="row mb-5">
      <div class="col-lg-12">
        <a class="btn btn-common btn-lg mr-3" routerLink="/login" outerLink="login"><i class="lni-lock"></i> iniciar
          Sesión</a>
        <a href="/register" class="btn btn-common btn-lg" outerLink="register"><i class="lni-pencil"></i>
          Registrarse</a>
      </div>
    </div>
  </ng-template>
</div>
